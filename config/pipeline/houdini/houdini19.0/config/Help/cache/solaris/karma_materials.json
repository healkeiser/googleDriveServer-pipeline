{"type": "root", "attrs": {"parent": "karma", "flow": "kug", "index": "no"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": [{"type": "supertitle", "text": ["Karma"]}, " Materials"], "extent": [0, 23]}, {"type": "warning_group", "body": [{"type": "warning", "indent": 0, "role": "item", "extent": [34, 43], "body": [{"type": "para", "indent": 4, "text": ["Work In Progress. Expect information and images to update periodically while this notice is present."], "extent": [43, 149]}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 0, "text": ["Materials in USD, is that a single material can have multiple outputs, which target different renderers. Primitives can only have one material binding, so renderers are able to select output(s) they wish to use, based on the namespace or renderContext of the output(s)."], "extent": [89, 360]}, {"type": "para", "indent": 0, "text": ["Materials can also have multiple outputs, to support different renderers or render contexts. Karma supports several render contexts, so it has a priority it uses to select a surface, displacement, or volume output."], "extent": [360, 576]}, {"type": "table", "thead": [{"type": "row", "body": [{"type": "cell", "indent": 0, "text": ["priority "], "role": "th", "extent": [576, 588], "container": true}, {"type": "cell", "indent": 4, "text": ["renderContext "], "role": "th", "extent": [588, 609], "container": true}, {"type": "cell", "indent": 8, "text": ["Shaders "], "role": "th", "extent": [609, 628], "container": true}, {"type": "cell", "indent": 12, "text": ["Implementation "], "role": "th", "extent": [628, 658], "container": true}, {"type": "cell", "indent": 16, "text": ["Example Nodes "], "role": "th", "extent": [658, 691]}], "divider": false}], "body": [{"type": "row", "body": [{"type": "cell", "indent": 0, "text": ["1 "], "role": "td", "extent": [691, 695], "container": true, "attrs": {"width": "5%"}}, {"type": "cell", "indent": 4, "text": [{"type": "code", "text": ["outputs:karma"]}, " "], "role": "td", "extent": [710, 732], "container": true, "attrs": {"width": "5%"}}, {"type": "cell", "indent": 8, "text": ["VEX "], "role": "td", "extent": [751, 765], "container": true, "attrs": {"width": "15%"}}, {"type": "cell", "indent": 12, "text": ["sourceCode "], "role": "td", "extent": [789, 814], "container": true, "attrs": {"width": "25%"}}, {"type": "cell", "role": "td", "body": [{"type": "bullet_group", "body": [{"blevel": 18, "type": "bullet", "indent": 16, "text": [{"scheme": "Smallicon", "value": "VOP/carpaintshadercore", "type": "link", "text": "", "fullpath": "/solaris/VOP/carpaintshadercore"}, " ", {"scheme": "Node", "value": "/nodes/vop/carpaintshadercore", "type": "link", "text": ["Car Paint"], "fullpath": "/nodes/vop/carpaintshadercore"}, " "], "extent": [842, 936]}, {"blevel": 18, "type": "bullet", "indent": 16, "text": [{"scheme": "Smallicon", "value": "VOP/classicshader", "type": "link", "text": "", "fullpath": "/solaris/VOP/classicshader"}, " ", {"scheme": "Node", "value": "/nodes/vop/classicshader", "type": "link", "text": ["Classic"], "fullpath": "/nodes/vop/classicshader"}, " "], "extent": [936, 1018]}, {"blevel": 18, "type": "bullet", "indent": 16, "text": [{"scheme": "Smallicon", "value": "VOP/principledshader", "type": "link", "text": "", "fullpath": "/solaris/VOP/principledshader"}, " ", {"scheme": "Node", "value": "/nodes/vop/principledshader", "type": "link", "text": ["Principled Shader"], "fullpath": "/nodes/vop/principledshader"}], "extent": [1018, 1115]}, {"blevel": 18, "type": "bullet", "indent": 16, "text": [{"scheme": "Smallicon", "value": "VOP/pyroadvancedshader", "type": "link", "text": "", "fullpath": "/solaris/VOP/pyroadvancedshader"}, " ", {"scheme": "Node", "value": "/nodes/vop/pyroadvancedshader", "type": "link", "text": ["Pyro"], "fullpath": "/nodes/vop/pyroadvancedshader"}, " "], "extent": [1115, 1204]}], "container": true}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": ["2 "], "role": "td", "extent": [1204, 1208], "container": true, "attrs": {"width": "5%"}}, {"type": "cell", "indent": 4, "text": [{"type": "code", "text": ["outputs:mtlx"]}, " "], "role": "td", "extent": [1223, 1244], "container": true}, {"type": "cell", "indent": 8, "text": ["MaterialX "], "role": "td", "extent": [1244, 1264], "container": true}, {"type": "cell", "indent": 12, "text": ["UsdShade primitives "], "role": "td", "extent": [1264, 1298], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "bullet_group", "body": [{"blevel": 18, "type": "bullet", "indent": 16, "text": [{"scheme": "Smallicon", "value": "COMMON/materialx", "type": "link", "text": "", "fullpath": "/solaris/COMMON/materialx"}, " ", {"scheme": "Node", "value": "/nodes/vop/mtlxstandard_surface", "type": "link", "text": ["Standard Surface"], "fullpath": "/nodes/vop/mtlxstandard_surface"}, " "], "extent": [1298, 1395]}, {"blevel": 18, "type": "bullet", "indent": 16, "text": [{"scheme": "Smallicon", "value": "COMMON/materialx", "type": "link", "text": "", "fullpath": "/solaris/COMMON/materialx"}, " ", {"scheme": "Node", "value": "/nodes/vop/mtlxuniform_edf", "type": "link", "text": ["Uniform EDF"], "fullpath": "/nodes/vop/mtlxuniform_edf"}, " "], "extent": [1395, 1482]}, {"blevel": 18, "type": "bullet", "indent": 16, "text": [{"scheme": "Smallicon", "value": "COMMON/materialx", "type": "link", "text": "", "fullpath": "/solaris/COMMON/materialx"}, " ", {"scheme": "Node", "value": "/nodes/vop/mtlxabsorption_vdf", "type": "link", "text": ["Absorption VDF"], "fullpath": "/nodes/vop/mtlxabsorption_vdf"}], "extent": [1482, 1574]}], "container": true}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": ["3 "], "role": "td", "extent": [1574, 1578], "container": true, "attrs": {"width": "5%"}}, {"type": "cell", "indent": 4, "text": [{"type": "code", "text": ["outputs:karma_xpu"]}, " "], "role": "td", "extent": [1593, 1619], "container": true}, {"type": "cell", "indent": 8, "text": ["karma_xpu "], "role": "td", "extent": [1619, 1639], "container": true}, {"type": "cell", "indent": 12, "text": ["UsdShade primitives "], "role": "td", "extent": [1639, 1673], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "bullet_group", "body": [{"blevel": 18, "type": "bullet", "indent": 16, "text": [{"scheme": "Smallicon", "value": "VOP/kma_hair", "type": "link", "text": "", "fullpath": "/solaris/VOP/kma_hair"}, " ", {"scheme": "Node", "value": "/nodes/vop/kma_hair", "type": "link", "text": ["Karma Hair"], "fullpath": "/nodes/vop/kma_hair"}, " "], "extent": [1673, 1748]}, {"blevel": 18, "type": "bullet", "indent": 16, "text": [{"scheme": "Smallicon", "value": "VOP/kma_pyropreview", "type": "link", "text": "", "fullpath": "/solaris/VOP/kma_pyropreview"}, " ", {"scheme": "Node", "value": "/nodes/vop/kma_pyropreview", "type": "link", "text": ["XPU Pyro Preview"], "fullpath": "/nodes/vop/kma_pyropreview"}, " "], "extent": [1748, 1843]}], "container": true}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": ["4 "], "role": "td", "extent": [1843, 1847], "container": true, "attrs": {"width": "5%"}}, {"type": "cell", "indent": 4, "text": [{"type": "code", "text": ["outputs"]}, " "], "role": "td", "extent": [1862, 1878], "container": true}, {"type": "cell", "indent": 8, "text": ["USD Preview "], "role": "td", "extent": [1878, 1900], "container": true}, {"type": "cell", "indent": 12, "text": ["UsdShade primitives "], "role": "td", "extent": [1900, 1934], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "bullet_group", "body": [{"blevel": 18, "type": "bullet", "indent": 16, "text": [{"scheme": "Smallicon", "value": "VOP/usdpreviewsurface", "type": "link", "text": "", "fullpath": "/solaris/VOP/usdpreviewsurface"}, " ", {"scheme": "Node", "value": "/nodes/vop/usdpreviewsurface", "type": "link", "text": ["USD Preview Surface"], "fullpath": "/nodes/vop/usdpreviewsurface"}, " "], "extent": [1934, 2038]}], "container": true}]}], "divider": false}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Building Shaders"], "extent": [2038, 2061], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["Shader building for Karma is the same as it was for Mantra or other third-party renderers, using VOPs."], "extent": [2061, 2168]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Material Library tries to create a USD Preview Surface from your material. It works best with Principled Shader and MtlX Standard Surface, but if it doesn\u2019t look right, or if you need to use textures, you may want to create your own USD Preview manually."], "extent": [2168, 2426]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Textures can slow down GL viewers, particularly Storm, so where possible rely on displayColors/displayOpacity in USD Preview shaders."], "extent": [2426, 2563]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Using the Collect VOP as the terminus when building materials makes it easier to add displacement shaders, as well as manual USD Preview Surfaces or other shaders to the material."], "extent": [2563, 2746]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Parameter VOPs can be used to create a ", {"type": "q", "text": ["public"]}, " material interface. This makes editing materials downstream in LOPs easier, and not require editing the underlying shader graph. It also makes it possible to drive different shaders with the same parameter (such as the path to a texture map)."], "extent": [2746, 3040]}], "container": true}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["VEX"], "extent": [3040, 3052], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["Rather than bind directly to ", {"type": "code", "text": ["Cd"]}, ", use the ", {"scheme": "Node", "value": "/nodes/vop/surfacecolor", "type": "link", "text": ["Surface Color"], "fullpath": "/nodes/vop/surfacecolor"}, " node in your shaders. This will fall back to ", {"type": "code", "text": ["displayColor"]}, " primvars if ", {"type": "code", "text": ["Cd"]}, " isn\u2019t found on the geometry, which helps make VEX shaders easier to port from Mantra to Karma."], "extent": [3052, 3309]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Point Cloud or other geometry-lookup shaders should still function in Karma, but they cannot access any primitives on the stage. They can only access .bgeo geometry files from disk."], "extent": [3309, 3494]}], "container": true}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["MaterialX"], "extent": [3494, 3512], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["The ", {"type": "em", "text": ["MaterialX Subnet"]}, " tool helps produce shader graphs using only MaterialX nodes. After diving inside, the ", {"keys": ["Tab"], "type": "keys", "text": null}, " menu is filtered to only show MaterialX nodes."], "extent": [3512, 3680]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Similar to the ", {"type": "em", "text": ["MaterialX Subnet"]}, " tool, the ", {"type": "em", "text": ["Karma MaterialX Subnet"]}, " tool filters the tab menu for MaterialX and other Karma-compatible shaders. This helps prevent VEX nodes from being mixed into the shading graph you send to Karma."], "extent": [3680, 3916]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["MaterialX nodes can be used to drive the patterns on Karma Hair or othen non-VEX shaders for Karma."], "extent": [3916, 4019]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Unlike the Principled Shader, MtlX Standard Surface does not auto-bind it\u2019s parameters to geometry attributes."], "extent": [4019, 4133]}], "container": true}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["USD Preview Shader"], "extent": [4133, 4160], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["USD PrimVar reader is compatible with MaterialX nodes in Karma."], "extent": [4160, 4228]}], "container": true}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Texture Maps"], "extent": [4228, 4246], "body": []}], "title": [{"type": "supertitle", "text": ["Karma"]}, " Materials"], "included": ["/solaris/kug"]}